(this["webpackJsonptask-tracker"]=this["webpackJsonptask-tracker"]||[]).push([[0],{127:function(n,e,t){n.exports=t(244)},132:function(n,e,t){},145:function(n,e){},147:function(n,e){},163:function(n,e){},165:function(n,e){},244:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(30),u=t.n(i),c=(t(132),t(8)),o=t(10),s=t(6),l=t.n(s),d=t(14),f=t(9),p=t(84),v=new p.a({id:"task-tracker-tutorial-qnqfu"}),b=r.createContext(void 0),m=function(n){var e=n.children,t=r.useRef(v),a=r.useState(v.currentUser),i=Object(f.a)(a,2),u=i[0],c=i[1];r.useEffect((function(){c(v.currentUser)}),[t.current.currentUser]);var o=function(){var n=Object(d.a)(l.a.mark((function n(e,t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.auth.emailPassword.registerUser(e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),s={id:"task-tracker-tutorial-qnqfu",user:u,logIn:function(){var n=Object(d.a)(l.a.mark((function n(e,t){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=p.b.emailPassword(e,t),n.next=3,v.logIn(r);case 3:c(v.currentUser);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),logOut:function(){var n=Object(d.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.logOut();case 2:c(v.currentUser);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),registerUser:o};return r.createElement(b.Provider,{value:s},e)},g=function(){var n=r.useContext(b);if(!n)throw new Error("You must call useRealmApp() inside of a <RealmApp />.");return n},O=t(7),k=t(254),j=t(54),h=t(253),x=t(122),E=t(22),w=function(n){var e=n.children,t=g(),a=t.id,i=t.user,u=r.useState(y(a,i)),c=Object(f.a)(u,2),o=c[0],s=c[1];return r.useEffect((function(){s(y(a,i))}),[a,i]),r.createElement(E.a,{client:o},e)};function y(n,e){var t="https://realm.mongodb.com/api/client/v2.0/app/".concat(n,"/graphql"),r=new k.a({uri:t}),a=Object(x.a)(function(){var n=Object(d.a)(l.a.mark((function n(t,r){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.headers,n.abrupt("return",{headers:Object(O.a)(Object(O.a)({},a),{},{Authorization:"Bearer ".concat(e.accessToken)})});case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}());return new j.a({link:a.concat(r),cache:new h.a})}var C=t(124),_=t(38),I=t.n(_),A=t(61),T=t.n(A),D=t(62),S=t.n(D),P=t(13),z=t(85),M=t.n(z);function U(){var n=Object(c.a)(["\n  margin-bottom: 16px;\n"]);return U=function(){return n},n}function L(){var n=Object(c.a)(["\n  margin: 0;\n  font-size: 32px;\n"]);return L=function(){return n},n}function R(){var n=Object(c.a)(["\n  padding: 8px;\n  color: black;\n  width: 400px;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n"]);return R=function(){return n},n}function q(){var n=Object(c.a)(["\n  height: 100vh;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n"]);return q=function(){return n},n}function N(){var n=Object(c.a)(["\n  background: none;\n  border: none;\n  font-size: 12px;\n  color: ",";\n"]);return N=function(){return n},n}function $(){var n=Object(c.a)(["\n  line-height: 18px;\n"]);return $=function(){return n},n}function F(){var n=Object(c.a)(["\n  margin-top: 8px;\n  font-size: 12px;\n  display: flex;\n  justify-content: center;\n"]);return F=function(){return n},n}var B=function(){var n=g(),e=r.useState("login"),t=Object(f.a)(e,2),a=t[0],i=t[1],u=r.useState(""),c=Object(f.a)(u,2),o=c[0],s=c[1],p=r.useState(""),v=Object(f.a)(p,2),b=v[0],m=v[1];r.useEffect((function(){s(""),m(""),x({})}),[a]);var k=r.useState({}),j=Object(f.a)(k,2),h=j[0],x=j[1];function E(n){console.error(n);var e=function(n){var e,t=n.message.split(":"),r=t[t.length-1].trimStart();if(!r)return{status:"",message:""};var a=Object(C.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),i=r.match(a),u=null!==(e=null===i||void 0===i?void 0:i.groups)&&void 0!==e?e:{},c=u.status,o=u.message;return{status:c,message:o}}(n),t=e.status;switch(e.message||t){case"invalid username":x((function(n){return Object(O.a)(Object(O.a)({},n),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case"401":x((function(n){return Object(O.a)(Object(O.a)({},n),{},{password:"Incorrect password."})}));break;case"name already in use":case"409":x((function(n){return Object(O.a)(Object(O.a)({},n),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case"400":x((function(n){return Object(O.a)(Object(O.a)({},n),{},{password:"Password must be between 6 and 128 characters."})}))}}var w=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x((function(n){return Object(O.a)(Object(O.a)({},n),{},{password:void 0})})),e.prev=1,e.next=4,n.logIn(o,b);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),E(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=M.a.isEmail(o),x((function(n){return Object(O.a)(Object(O.a)({},n),{},{password:void 0})})),!t){e.next=16;break}return e.prev=3,e.next=6,n.registerUser(o,b);case 6:return e.next=8,w();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(3),E(e.t0);case 14:e.next=17;break;case 16:x((function(n){return Object(O.a)(Object(O.a)({},n),{},{email:"Email is invalid."})}));case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return r.createElement(H,null,r.createElement(S.a,null,r.createElement(Y,null,r.createElement(Q,null,r.createElement(K,null,"login"===a?"Log In":"Register an Account")),r.createElement(Q,null,r.createElement(T.a,{type:"email",label:"Email",placeholder:"your.email@example.com",onChange:function(n){x((function(n){return Object(O.a)(Object(O.a)({},n),{},{email:void 0})})),s(n.target.value)},value:o,state:h.email?"error":M.a.isEmail(o)?"valid":"none",errorMessage:h.email})),r.createElement(Q,null,r.createElement(T.a,{type:"password",label:"Password",onChange:function(n){m(n.target.value)},value:b,state:h.password?"error":h.password?"valid":"none",errorMessage:h.password})),"login"===a?r.createElement(I.a,{variant:"primary",onClick:function(){return w()}},"Log In"):r.createElement(I.a,{variant:"primary",onClick:function(){return y()}},"Register"),r.createElement(G,null,r.createElement(J,null,"login"===a?"Don't have an account?":"Already have an account?"),r.createElement(W,{onClick:function(n){n.preventDefault(),i((function(n){return"login"===n?"register":"login"}))}},"login"===a?"Register one now.":"Log in instead.")))))};var G=o.a.div(F()),J=o.a.span($()),W=o.a.button(N(),P.uiColors.green.dark2),H=o.a.div(q()),Y=o.a.div(R()),K=o.a.h1(L()),Q=o.a.div(U());function V(){var n=Object(c.a)(["\n  padding-bottom: 8px;\n"]);return V=function(){return n},n}function X(){var n=Object(c.a)(["\n  width: 100%;\n  height: 64px;\n  background: ",";\n  font-size: 16px;\n  color: black;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 0;\n"]);return X=function(){return n},n}var Z=function(){var n=g(),e=n.user,t=n.logOut,a=null===e||void 0===e?void 0:e.profile,i=null===a||void 0===a?void 0:a.email;return r.createElement(nn,null,r.createElement(en,null,i),r.createElement(I.a,{size:"xsmall",onClick:function(){return t()}},"Logout"))},nn=o.a.div(X(),P.uiColors.gray.base),en=o.a.div(V()),tn=t(15),rn=t(74),an=t(18),un=t(55),cn=t.n(un),on=t(39);function sn(){var n=Object(c.a)(["\n    query GetUser($userId: String!) {\n  user(query: {user_id: $userId}) {\n    _id\n    _partition\n    name\n    image\n    user_id\n  }\n}\n    "]);return sn=function(){return n},n}function ln(){var n=Object(c.a)(["\n    mutation DeleteTask($taskId: ObjectId!) {\n  deletedTask: deleteOneTask(query: {_id: $taskId}) {\n    _id\n    name\n    status\n    assignee {\n      _id\n      name\n      image\n      user_id\n    }\n  }\n}\n    "]);return ln=function(){return n},n}function dn(){var n=Object(c.a)(["\n    mutation UpdateTask($taskId: ObjectId!, $updates: TaskUpdateInput!) {\n  task: updateOneTask(query: {_id: $taskId}, set: $updates) {\n    _id\n    name\n    status\n    assignee {\n      _id\n      name\n      image\n      user_id\n    }\n  }\n}\n    "]);return dn=function(){return n},n}function fn(){var n=Object(c.a)(["\n    mutation AddTask($task: TaskInsertInput!) {\n  task: insertOneTask(data: $task) {\n    _id\n    name\n    status\n    assignee {\n      _id\n      name\n      image\n      user_id\n    }\n  }\n}\n    "]);return fn=function(){return n},n}function pn(){var n=Object(c.a)(["\n    query GetAllTasks {\n  tasks {\n    _id\n    name\n    status\n    assignee {\n      _id\n      name\n      image\n      user_id\n    }\n  }\n}\n    "]);return pn=function(){return n},n}var vn=cn()(pn());function bn(n){return on.c(vn,n)}var mn=cn()(fn());function gn(n){return on.b(mn,n)}var On=cn()(dn());function kn(n){return on.b(On,n)}var jn=cn()(ln());function hn(n){return on.b(jn,n)}var xn,En=cn()(sn());function wn(){var n=Object(c.a)(["\n  font-size: 24px;\n  margin: 0;\n  text-align: left;\n"]);return wn=function(){return n},n}function yn(){var n=Object(c.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  :not(:last-child) {\n    margin-bottom: 8px;\n  }\n"]);return yn=function(){return n},n}function Cn(){var n=Object(c.a)(["\n  font-size: 16px;\n"]);return Cn=function(){return n},n}function _n(){var n=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  padding-right: 16px;\n  border-radius: 500px;\n  border: 0.5px solid transparent;\n"]);return _n=function(){return n},n}function In(){var n=Object(c.a)(["\n  width: 100%;\n"]);return In=function(){return n},n}function An(n){var e=n.task,t=e.assignee,a=e.name,i=e.status,u=Sn.get(i),c=Dn.get(i);return r.createElement(r.Fragment,null,r.createElement(Nn,null,r.createElement(Un,{user:t}),r.createElement(Fn,{backgroundColor:null===u||void 0===u?void 0:u.background,textColor:null===u||void 0===u?void 0:u.text},c)),r.createElement(Nn,null,r.createElement($n,null,r.createElement("span",null,a))))}function Tn(n){var e=n.draft,t=n.draftActions,a=e.status,i=e.name,u=t.updateDraft,c=t.deleteDraft,o=t.saveDraft,s=Sn.get(a),f=Dn.get(a);return r.createElement(r.Fragment,null,r.createElement(Nn,null,r.createElement(Fn,{backgroundColor:null===s||void 0===s?void 0:s.background,textColor:null===s||void 0===s?void 0:s.text},f)),r.createElement(Nn,null,r.createElement(Pn,{placeholder:"Enter a task...",onChange:function(n){u(Object(O.a)(Object(O.a)({},e),{},{name:n.target.value}))},value:i})),r.createElement(Nn,null,r.createElement(Mn,{onClick:function(){c()}},"Delete"),r.createElement(zn,{onClick:Object(d.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:case"end":return n.stop()}}),n)}))),disabled:!e.name},"Add")))}!function(n){n.Complete="COMPLETE",n.Open="OPEN",n.Inprogress="INPROGRESS"}(xn||(xn={}));var Dn=new Map([[xn.Open,"Open"],[xn.Inprogress,"In Progress"],[xn.Complete,"Complete"]]),Sn=new Map([[xn.Open,{background:P.uiColors.blue.base,text:P.uiColors.gray.light3}],[xn.Inprogress,{background:P.uiColors.yellow.base,text:P.uiColors.gray.dark2}],[xn.Complete,{background:P.uiColors.green.base,text:P.uiColors.gray.light3}]]),Pn=Object(o.a)(T.a)(In()),zn=function(n){return r.createElement(I.a,Object.assign({variant:"primary"},n),"Add")},Mn=function(n){return r.createElement(I.a,Object.assign({variant:"danger"},n),"Delete")};function Un(n){var e=n.user,t=(null===e||void 0===e?void 0:e.image)||"./no-avatar.png",a=(null===e||void 0===e?void 0:e.name)||"No assignee";return r.createElement(Ln,null,r.createElement(qn,{src:t}),r.createElement(Rn,null,a))}var Ln=o.a.div(_n()),Rn=o.a.div(Cn()),qn=o.a.div((function(n){return"\n    background-image: url('".concat(n.src,"');\n    /* make a square container */\n    width: 24px;\n    height: 24px;\n    /* fill the container, preserving aspect ratio, and cropping to fit */\n    background-size: cover;\n    /* center the image vertically and horizontally */\n    background-position: top center;\n    /* round the edges to a circle with border radius 1/2 container size */\n    border-radius: 50%;\n    margin-right: 8px;\n")})),Nn=o.a.div(yn()),$n=o.a.div(wn()),Fn=o.a.div((function(n){return"\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 12px;\n  text-align: center;\n  border-radius: 500px;\n  background-color: ".concat(n.backgroundColor||"lightgray",";\n  padding: 8px 12px;\n  margin-left: auto;\n  color: ").concat(n.textColor||"black",";\n  user-select: none;\n")}));function Bn(){var n=Object(c.a)(["\n  padding: 8px;\n  color: black;\n"]);return Bn=function(){return n},n}function Gn(n){var e=n.task;return r.createElement(S.a,null,r.createElement(Wn,null,r.createElement(An,{task:e})))}function Jn(n){var e=n.draft,t=n.draftActions;return r.createElement(S.a,null,r.createElement(Wn,null,r.createElement(Tn,{draft:e,draftActions:t})))}var Wn=o.a.div(Bn()),Hn=t(52);function Yn(n){var e=r.useState(null),t=Object(f.a)(e,2),a=t[0],i=t[1],u=function(n){var e=r.useState(void 0),t=Object(f.a)(e,2),a=t[0],i=t[1],u=(o={onCompleted:function(n){var e=n.user;console.log("user",e),e&&i(e)}},on.a(En,o)),c=Object(f.a)(u,1)[0];var o;return r.useEffect((function(){(null===n||void 0===n?void 0:n.assignee)&&c({variables:{userId:n.assignee}})}),[n,c]),a}(a),c={createDraft:function(n){n&&i(n)},updateDraft:function(n){i(n)},deleteDraft:function(){i(null)},saveDraft:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return e.next=3,n.addTask(Object(O.a)(Object(O.a)({},a),{},{_id:new Hn.b.ObjectId,assignee:null!==u&&void 0!==u?u:void 0,_partition:"My Project"}));case 3:i(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};return[a,c]}var Kn=t(21),Qn=t(252),Vn=t(251),Xn=t(249),Zn=t(250);function ne(n,e){return n.status===e}var ee=function(n){return ne(n,xn.Open)},te=function(n){return ne(n,xn.Inprogress)},re=function(n){return ne(n,xn.Complete)},ae=function(n,e){return n.find((function(n){return n._id===e}))},ie=function(n){return Qn.a(Vn.a("status",n))};function ue(n){var e=r.useState(function(n){var e=n.filter(ee),t=n.filter(te),r=n.filter(re);return[{status:xn.Open,displayName:"Open",tasks:e,displayOrder:e.map((function(n){return n._id}))},{status:xn.Inprogress,displayName:"In Progress",tasks:t,displayOrder:t.map((function(n){return n._id}))},{status:xn.Complete,displayName:"Complete",tasks:r,displayOrder:r.map((function(n){return n._id}))}]}(n)),t=Object(f.a)(e,2),a=t[0],i=t[1],u=r.useCallback((function(n){i((function(e){return e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{tasks:n.filter((function(n){return n.status===e.status}))})}))}))}),[]),c=function(n){var e=n.lists,t=n.setLists,a=r.useCallback((function(n,r){var a=ie(r)(e);if(a){var i=[].concat(Object(an.a)(a.displayOrder),Object(an.a)(n.map((function(n){return n._id}))));t((function(e){return e.map((function(e){return r!==e.status?e:Object(O.a)(Object(O.a)({},a),{},{tasks:[].concat(Object(an.a)(a.tasks),Object(an.a)(n)),displayOrder:Array.from(new Set(i))})}))}))}}),[e,t]),i=r.useCallback((function(n,r,a){var i=ie(r)(e);if(i){var u=[];u=a?Xn.a(a,n._id,i.displayOrder):[].concat(Object(an.a)(i.displayOrder),[n._id]),t((function(e){return e.map((function(e){return r!==e.status?e:Object(O.a)(Object(O.a)({},i),{},{tasks:[].concat(Object(an.a)(i.tasks),[n]),displayOrder:Array.from(new Set(u))})}))}))}}),[e,t]),u=r.useCallback((function(n,r){var a=ie(r)(e);if(a){var i=a.displayOrder.filter((function(e){return e!==n._id}));t((function(e){return e.map((function(e){return r!==e.status?e:Object(O.a)(Object(O.a)({},a),{},{tasks:a.tasks.filter((function(e){return e._id!==n._id})),displayOrder:Array.from(new Set(i))})}))}))}}),[e,t]),c=r.useCallback((function(n,e,t,r,a){u(n,e),i(n,r,a)}),[u,i]),o=r.useCallback((function(n,r,a){var i=ie(r)(e);if(i){var u=i.displayOrder.findIndex((function(e){return e===n._id})),c=Zn.a(u,a,i.displayOrder);t((function(n){return n.map((function(n){return r!==n.status?n:Object(O.a)(Object(O.a)({},i),{},{displayOrder:Array.from(new Set(c))})}))}))}}),[e,t]);return{addTasksToList:a,removeTaskFromList:u,moveTask:c,moveTaskInColumn:o}}({lists:a,setLists:i}),o=c.addTasksToList,s=c.removeTaskFromList,l=c.moveTask,d=c.moveTaskInColumn,p=r.useRef();r.useEffect((function(){if(p.current){var e,t=p.current,r=n,i=r.filter((function(n){return!Boolean(ae(t,n._id))})),c=t.filter((function(n){return!Boolean(ae(r,n._id))})),d=r.filter((function(n){var e=Boolean(ae(i,n._id)),r=Boolean(ae(c,n._id));return!e&&!r&&ae(t,n._id).status!==n.status}));if(i.length||c.length||d.length)Object.entries(i.reduce((function(n,e){return Object(O.a)(Object(O.a)({},n),{},Object(Kn.a)({},e.status,[].concat(Object(an.a)(n[e.status]),[e])))}),(e={},Object(Kn.a)(e,xn.Open,[]),Object(Kn.a)(e,xn.Inprogress,[]),Object(Kn.a)(e,xn.Complete,[]),e))).forEach((function(n){var e=Object(f.a)(n,2),t=e[0],r=e[1];o(r,t)})),c.forEach((function(n){s(n._id,n.status)})),d.forEach((function(n){var e=t.find((function(e){return e._id===n._id})).status,r=a.find((function(n){return n.status===e})).displayOrder.findIndex((function(e){return e===n._id})),i=n.status;l(n,e,r,i)})),u(n)}p.current=n}),[n,a,o,s,l,u]);var v=function(e){var t=e.draggableId,r=e.source,a=e.destination;if(a){var i=ae(n,t),u=r.droppableId,c=r.index,o=a.droppableId,s=a.index;u===o?c!==s&&d(i,pe.get(u)||xn.Open,s):l(i,pe.get(u),c,pe.get(o),s)}};return{lists:a,actions:{handleDragAndDrop:v,undoDragAndDrop:function(n){var e=null===n||void 0===n?void 0:n.destination,t=null===n||void 0===n?void 0:n.source;e&&t&&v(Object(O.a)(Object(O.a)({},n),{},{source:e,destination:t}))}}}}function ce(){var n=Object(c.a)(["\n  padding: 8px;\n  border: none;\n  background: ",";\n  background: transparent;\n  border-radius: 4px;\n  font-size: 16px;\n  text-align: left;\n  font-weight: bold;\n  color: ",";\n  :hover {\n    background: ",";\n  }\n"]);return ce=function(){return n},n}function oe(){var n=Object(c.a)(["\n  :not(:last-child) {\n    margin-bottom: 16px;\n  }\n"]);return oe=function(){return n},n}function se(){var n=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  background: ",";\n  border-radius: 4px;\n  overflow-y: scroll;\n  max-height: 80vh;\n  :not(:last-child) {\n    margin-bottom: 8px;\n  }\n"]);return se=function(){return n},n}function le(){var n=Object(c.a)(["\n  margin: 0;\n  margin-bottom: 16px;\n  font-size: 32px;\n  color: ",";\n"]);return le=function(){return n},n}function de(){var n=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  max-width: 512px;\n  margin: 10px 10px;\n"]);return de=function(){return n},n}function fe(){var n=Object(c.a)(["\n          width: 100%;\n          height: 100%;\n          display: flex;\n          justify-content: center;\n          padding-top: 0px;\n        "]);return fe=function(){return n},n}var pe=new Map([["OPEN",xn.Open],["INPROGRESS",xn.Inprogress],["COMPLETE",xn.Complete]]);function ve(n){var e=n.tasks,t=n.taskActions,r=n.showDetail,a=ue(e),i=a.lists,u=a.actions;return Object(tn.c)(be,{onDragEnd:function(n){var e=n.draggableId,r=n.destination,a=(r=void 0===r?{droppableId:null}:r).droppableId;if(a){u.handleDragAndDrop(n);var i=pe.get(a);i&&t.updateTask(e,{status:pe.get(i)}).catch((function(e){u.undoDragAndDrop(n)}))}}},i.map((function(n){var e=n.status,a=n.displayName,i=n.tasks,u=n.displayOrder;return Object(tn.c)(me,{key:e,status:e,displayName:a,tasks:u.map((function(n){var e;return null!==(e=i.find((function(e){return e._id===n})))&&void 0!==e?e:void 0})).filter(Boolean),taskActions:t,showDetail:r})})))}var be=function(n){var e=n.onDragEnd,t=n.children;return Object(tn.c)(rn.a,{onDragEnd:e},Object(tn.c)("div",{css:Object(tn.b)(fe())},t))};function me(n){var e=g().user,t=n.status,r=n.displayName,a=n.tasks,i=n.taskActions,u=n.showDetail,c=Yn(i),o=Object(f.a)(c,2),s=o[0],l=o[1];return Object(tn.c)(rn.c,{droppableId:t},(function(n){return Object(tn.c)(ge,Object.assign({ref:n.innerRef},n.droppableProps),Object(tn.c)(ke,null,Object(tn.c)(Oe,null,r),a.map((function(n,e){return Object(tn.c)(he,{key:n._id,id:n._id,index:e,onClick:function(){u(n)}},Object(tn.c)(Gn,{task:n}))})),n.placeholder,s&&Object(tn.c)(je,null,Object(tn.c)(Jn,{draft:s,draftActions:l})),!s&&Object(tn.c)(xe,{onClick:function(){var n;return l.createDraft({status:t,name:"",assignee:null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:""})}},"+ Add Task")))}))}var ge=o.a.div(de()),Oe=o.a.h2(le(),P.uiColors.black),ke=o.a.div(se(),P.uiColors.gray.light1),je=o.a.div(oe()),he=function(n){var e=n.id,t=n.index,r=n.children,a=n.onClick;return Object(tn.c)(rn.b,{draggableId:e,index:t},(function(n){return Object(tn.c)(je,Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{onClick:a}),r)}))},xe=o.a.button(ce(),P.uiColors.white,P.uiColors.gray.dark2,P.uiColors.gray.light2),Ee=t(125),we=t.n(Ee);function ye(){var n=Object(c.a)(["\n  width: 100%;\n  margin: 8px 0;\n"]);return ye=function(){return n},n}function Ce(){var n=Object(c.a)(["\n  > div {\n    top: 20%;\n  }\n"]);return Ce=function(){return n},n}function _e(n){var e,t=n.task,a=n.taskActions,i=n.closeModal,u=g().user,c=function(){var n=Object(d.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,a.updateTask(t._id,{status:e});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=function(){var n=Object(d.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,a.deleteTask(e);case 4:i();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return r.createElement(Ie,{size:"small",open:Boolean(t),shouldClose:function(){return i(),!0}},t&&r.createElement(r.Fragment,null,r.createElement(An,{task:t}),(null===t||void 0===t?void 0:t.status)!==xn.Open&&r.createElement(Ae,{onClick:function(){return c(xn.Open)}},"Move to Open"),(null===t||void 0===t?void 0:t.status)!==xn.Inprogress&&r.createElement(Ae,{onClick:function(){return c(xn.Inprogress)}},"Move to In Progress"),(null===t||void 0===t?void 0:t.status)!==xn.Complete&&r.createElement(Ae,{onClick:function(){return c(xn.Complete)}},"Move to Complete"),(null===(e=t.assignee)||void 0===e?void 0:e.user_id)===(null===u||void 0===u?void 0:u.id)&&r.createElement(Ae,{variant:"danger",onClick:function(){return o(t)}},"Delete this task")))}var Ie=Object(o.a)(we.a)(Ce()),Ae=Object(o.a)(I.a)(ye());function Te(){var n=Object(c.a)(["\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n"]);return Te=function(){return n},n}var De=function(){var n=function(){var n=r.useState([]),e=Object(f.a)(n,2),t=e[0],a=e[1],i=bn({onCompleted:function(n){(null===n||void 0===n?void 0:n.tasks)&&a(n.tasks)}}).loading,u=gn(),c=Object(f.a)(u,1)[0],o=kn(),s=Object(f.a)(o,1)[0],p=hn(),v=Object(f.a)(p,1)[0],b=function(){var n=Object(d.a)(l.a.mark((function n(e){var r,i,u,o,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={task:{status:e.status,name:e.name,assignee:e.assignee?{link:e.assignee.user_id}:void 0,_partition:"My Project"}},i=Object(an.a)(t),n.prev=2,n.next=5,c({variables:r});case 5:o=n.sent,s=null===(u=o.data)||void 0===u?void 0:u.task,a([].concat(Object(an.a)(t),[s])),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(2),a(i),new Error("Unable to add task: ".concat(n.t0));case 14:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}(),m=function(){var n=Object(d.a)(l.a.mark((function n(e,r){var i,u,c,o,d,f,p,v;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c={taskId:e,updates:{status:null!==(i=null===r||void 0===r?void 0:r.status)&&void 0!==i?i:void 0,name:null!==(u=null===r||void 0===r?void 0:r.name)&&void 0!==u?u:void 0,assignee:r.assignee?{link:r.assignee.user_id}:void 0}},o=function(n){return n._id===e},d=Object(an.a)(t),d.find(o)){n.next=6;break}return n.abrupt("return");case 6:return n.prev=6,n.next=9,s({variables:c});case 9:p=n.sent,v=null===(f=p.data)||void 0===f?void 0:f.task,a([].concat(Object(an.a)(t.filter((function(n){return!o(n)}))),[v])),n.next=18;break;case 14:throw n.prev=14,n.t0=n.catch(6),a(d),new Error("Unable to update task");case 18:case"end":return n.stop()}}),n,null,[[6,14]])})));return function(e,t){return n.apply(this,arguments)}}(),g=function(){var n=Object(d.a)(l.a.mark((function n(e){var r,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={taskId:e._id},i=Object(an.a)(t),n.prev=2,n.next=5,v({variables:r});case 5:a(Object(an.a)(t.filter((function(n){return n._id!==e._id})))),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(2),a(i),new Error("Unable to delete task");case 12:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}();return{tasks:t,loading:i,actions:{addTask:b,updateTask:m,deleteTask:g}}}(),e=n.tasks,t=n.loading,a=n.actions,i=function(n){var e=r.useState(null),t=Object(f.a)(e,2),a=t[0],i=t[1],u=r.useCallback((function(n){if(a){var e=n.find((function(n){return n._id===a._id}));e&&i(e)}}),[a]);function c(){i(null)}return r.useEffect((function(){u(n)}),[n,u]),[function(n){var e=n.taskActions;return r.createElement(_e,{key:null===a||void 0===a?void 0:a._id,task:a,taskActions:e,closeModal:c})},{show:function(n){i(n)},close:c}]}(e),u=Object(f.a)(i,2),c=u[0],o=u[1].show;return r.createElement(Se,null,r.createElement(Z,null),!t&&r.createElement(ve,{tasks:e,taskActions:a,showDetail:o}),r.createElement(c,{taskActions:a}))},Se=o.a.div(Te());function Pe(){var n=Object(c.a)(["\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: calc(10px + 2vmin);\n  color: white;\n"]);return Pe=function(){return n},n}var ze=function(n){return a.a.createElement(m,null,a.a.createElement(Me,null,a.a.createElement(Ue,null)))},Me=o.a.div(Pe());function Ue(){var n=g();return n?n.user?a.a.createElement(w,null,a.a.createElement(De,null)):a.a.createElement(B,null):a.a.createElement("div",null,"Loading")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.a0b1e57c.chunk.js.map